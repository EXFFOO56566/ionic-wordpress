jQuery(document).ready(function(a){function k(b){alert("Location found");a("#gmw-lat").val(b.coords.latitude);a("#gmw-lng").val(b.coords.longitude);e(b.coords.latitude,b.coords.longitude,!0);a("#gmw-yl-spinner").hide()}function n(b){switch(b.code){case b.PERMISSION_DENIED:alert("User denied the request for Geolocation.");break;case b.POSITION_UNAVAILABLE:alert("Location information is unavailable.");break;case b.TIMEOUT:alert("The request to get user location timed out.");break;case b.UNKNOWN_ERROR:alert("An unknown error occurred.")}a("#gmw-yl-spinner").hide()}
function l(){var b=new google.maps.LatLng(a("#gmw-lat").val(),a("#gmw-lng").val());gmwFlMarker.setMap(null);gmwFlMarker=new google.maps.Marker({position:b,map:gmwFlLocationMap,draggable:!0});gmwFlLocationMap.setCenter(b);google.maps.event.addListener(gmwFlMarker,"dragend",function(b){a("#gmw-yl-get-latlng, #gmw-yl-get-address").removeClass("changed");a("#gmw-lat").val(b.latLng.lat());a("#gmw-lng").val(b.latLng.lng());e(b.latLng.lat(),b.latLng.lng(),!1)})}function e(b,c,g){a("#gmw-street-number, #gmw-street-name, #gmw-street, #gmw-city, #gmw-state, #gmw-state-long, #gmw-zipcode, #gmw-country, #gmw-country-long, #gmw-apt, #gmw-address, #gmw-formatted-address").val("");
geocoder=new google.maps.Geocoder;b=new google.maps.LatLng(b,c);geocoder.geocode({latLng:b},function(a,b){b==google.maps.GeocoderStatus.OK?a[0]&&(f(a[0]),1==g&&l()):alert("Geocoder failed due to: "+b)})}function f(b){a("#address-tab-wrapper :text").val("");a("#gmw-yl-autocomplete, #gmw-formatted-address, #gmw-address, #gmw-yl-field").val(b.formatted_address);address=b.address_components;b=!1;for(x in address)"street_number"==address[x].types&&(b=address[x].long_name,a("#gmw-street-number").val(b)),
"route"==address[x].types&&(street=address[x].long_name,a("#gmw-street-name").val(street),0!=b&&(street=b+" "+street),a("#gmw-street").val(street)),"administrative_area_level_1,political"==address[x].types&&(state=address[x].short_name,state_long=address[x].long_name,a("#gmw-state").val(state),a("#gmw-state-long").val(state_long)),"locality,political"==address[x].types&&(city=address[x].long_name,a("#gmw-city").val(city)),"postal_code"==address[x].types&&(zipcode=address[x].long_name,a("#gmw-zipcode").val(zipcode)),
"country,political"==address[x].types&&(country=address[x].short_name,country_long=address[x].long_name,a("#gmw-country").val(country),a("#gmw-country-long").val(country_long));a("#gmw-yl-update-location").hasClass("update")&&h()}function p(){var b=a("#gmw-street").val(),c=a("#gmw-apt").val(),g=a("#gmw-city").val(),e=a("#gmw-state").val(),f=a("#gmw-zipcode").val(),m=a("#gmw-country").val(),k=b+" "+c+" "+g+" "+e+" "+f+" "+m,b=b+" "+g+" "+e+" "+f+" "+m;geocoder=new google.maps.Geocoder;geocoder.geocode({address:b},
function(b,c){if(c==google.maps.GeocoderStatus.OK){gotLat=b[0].geometry.location.lat();gotLng=b[0].geometry.location.lng();var d=b[0].address_components;for(x in d)"administrative_area_level_1,political"==d[x].types&&(void 0!=d[x].short_name&&a("#gmw-state").val(d[x].short_name),void 0!=d[x].long_name&&a("#gmw-state-long").val(d[x].long_name)),"country,political"==d[x].types&&(void 0!=d[x].short_name&&a("#gmw-country").val(d[x].short_name),void 0!=d[x].long_name&&a("#gmw-country-long").val(d[x].long_name));
a("#gmw-lat").val(gotLat);a("#gmw-lng").val(gotLng);a("#gmw-address, #gmw-yl-field").val(k);a("#gmw-formatted-address, #gmw-yl-autocomplete").val(b[0].formatted_address);l();a("#gmw-yl-update-location").hasClass("update")&&h()}else alert("Geocode was not successful for the following reason: "+c)})}function h(){a(".gmw-yl-tab").removeClass("active");a("#gmw-yl-address-tab").addClass("active");a(".gmw-yl-tab-wrapper").hide();a("#gmw-yl-address-tab-wrapper").show();a("#gmw-yl-spinner").show();a("#gmw-yl-get-latlng, #gmw-yl-get-address").removeClass("changed");
a("#gmw-yl-update-location").hasClass("update")&&a("#gmw-yl-form").slideToggle();a("#gmw-yl-update-location").removeClass("update");a.ajax({type:"post",data:{action:"gmw_fl_update_location",formValues:a("#gmw-yl-form").serialize()},url:ajaxurl,success:function(b){setTimeout(function(){a("#gmw-yl-spinner").hide();a("#gmw-yl-message p").html(b);a("#gmw-yl-message").fadeToggle(function(){setTimeout(function(){a("#gmw-yl-message").fadeToggle()},2500)})},500)}});return!1}function q(){a("#gmw-your-location-wrapper input[type=text]").val("");
a("#gmw-yl-spinner").show();a("#gmw-yl-form").is(":visible")&&a("#gmw-yl-form").slideToggle();a.ajax({type:"post",data:{action:"gmw_fl_delete_location"},url:ajaxurl,success:function(b){a("#gmw-yl-spinner").hide();a("#gmw-yl-message p").html(b);a("#gmw-yl-message").fadeToggle(function(){setTimeout(function(){a("#gmw-yl-message").fadeToggle()},2500)})}})}if(0==a.trim(a("#gmw-formatted-address").val()).length||0==a.trim(a("#gmw-lat").val()).length||0==a.trim(a("#gmw-lng").val()).length)a("#gmw-yl-form input[type=text]").val(""),
a("#gmw-yl-get-address").addClass("changed"),a("#gmw-yl-get-latlng").addClass("changed");a("#gmw-street, #gmw-city, #gmw-state, #gmw-zipcode, #gmw-country").on("input",function(){a("#gmw-lat, #gmw-lng, #gmw-yl-autocomplete, #gmw-yl-field").val("");a("#gmw-yl-get-latlng").addClass("changed")});a("#gmw-lat, #gmw-lng").on("input",function(){a("#gmw-street-number, #gmw-street-name, #gmw-street, #gmw-city, #gmw-state, #gmw-state-long, #gmw-zipcode, #gmw-country, #gmw-country-long, #gmw-apt, #gmw-address, #gmw-formatted-address, #gmw-yl-autocomplete, #gmw-yl-field").val("");
a("#gmw-yl-get-address").addClass("changed")});a("#gmw-yl-edit").click(function(){a("#gmw-yl-form").slideToggle(function(){if(a("#gmw-yl-edit").hasClass("first")){a("#gmw-yl-edit").removeClass("first");var b=0<a.trim(a("#gmw-lat").val()).length?new google.maps.LatLng(a("#gmw-lat").val(),a("#gmw-lng").val()):new google.maps.LatLng("40.7827096","-73.9653099");gmwFlLocationMap=new google.maps.Map(document.getElementById("gmw-yl-map"),{zoom:10,center:b});gmwFlMarker=new google.maps.Marker({position:b,
map:gmwFlLocationMap,draggable:!0});google.maps.event.addListener(gmwFlMarker,"dragend",function(b){a("#gmw-yl-get-latlng, #gmw-yl-get-address").removeClass("changed");a("#gmw-lat").val(b.latLng.lat());a("#gmw-lng").val(b.latLng.lng());e(b.latLng.lat(),b.latLng.lng(),!1)})}})});a(".gmw-yl-tab").click(function(){a(".gmw-yl-tab").removeClass("active");a(this).addClass("active");a(".gmw-yl-tab-wrapper").hide();a(".update-btn-wrapper").hide();var b=a(this).attr("id");a("#"+b+"-wrapper").show();a("#"+
b+"-btn-wrapper").show()});a("#gmw-yl-delete").click(function(){q()});a("#gmw-yl-get-latlng, #gmw-yl-get-address").click(function(){a("#gmw-yl-update-location").addClass("update")});a("#gmw-yl-locator-btn").click(function(){a("#gmw-yl-get-latlng, #gmw-yl-get-address").removeClass("changed");a("#gmw-yl-spinner").show();navigator.geolocation?navigator.geolocation.getCurrentPosition(k,n,{timeout:1E4}):(alert("Geolocation is not supported by this browser."),a("#gmw-yl-spinner").hide())});(function(){var b=
document.getElementById("gmw-yl-autocomplete"),c=new google.maps.places.Autocomplete(b,{types:["geocode"]});google.maps.event.addListener(c,"place_changed",function(b){b=c.getPlace();b.geometry&&1==jQuery("#gmw-yl-autocomplete").length&&(a("#gmw-yl-get-latlng, #gmw-yl-get-address").removeClass("changed"),a("#gmw-street-number, #gmw-street-name, #gmw-street, #gmw-city, #gmw-state, #gmw-state-long, #gmw-zipcode, #gmw-country, #gmw-country-long, #gmw-apt, #gmw-address, #gmw-formatted-address").val(""),
a("#gmw-lat").val(b.geometry.location.lat()),a("#gmw-lng").val(b.geometry.location.lng()),f(b),l())})})();a("#gmw-yl-get-address").click(function(){if(!a("#gmw-yl-get-address").hasClass("changed"))return h();var b=a("#gmw-lat").val(),c=a("#gmw-lng").val();e(b,c,!0)});a("#gmw-yl-get-latlng").click(function(){if(!a("#gmw-yl-get-latlng").hasClass("changed"))return h();a("#gmw-lat").val("");a("#gmw-lng").val("");p()})});